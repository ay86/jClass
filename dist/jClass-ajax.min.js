!function($){$&&($=$.fn.extend($,{ajax:function(jConfig){function __fString(e,t){var a;switch(typeof t){case"string":a=(e?'"'+e+'" : "':"")+t+'"';break;case"number":a=(e?'"'+e+'" : ':"")+t;break;case"boolean":a=(e?'"'+e+'" : ':"")+t.toString();break;case"object":if(t instanceof Array){for(var s=[],n=0;n<t.length;n++)s.push(__fString(null,t[n]));a=(e?'"'+e+'" : ':"")+"["+s.join(",")+"]"}else a=null===t?(e?'"'+e+'" : ':"")+"null":(e?'"'+e+'" : ':"")+__fJsonStringify(t)}return a}function __fJsonStringify(e){var t=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a],n=__fString(a,s);n&&t.push(n)}return"{"+t.join(",")+"}"}function __fInitXHR(){var e;return window.XMLHttpRequest?e=new window.XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}function __fRun(){xhr.open(jConfig.method,jConfig.url,jConfig.async),"POST"===jConfig.method&&("JSON"===jConfig.dataType?xhr.setRequestHeader("Content-type","application/json;charset="+jConfig.charset):xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset="+jConfig.charset)),xhr.onreadystatechange=function(){if(4===this.readyState){var sStatus=this.status;switch(!0){case 0==sStatus:case/^[4|5]\d{2}$/.test(sStatus):jConfig.error.call(jConfig,{readyState:this.readyState,status:this.status,statusText:this.statusText,response:this.response,responseURL:this.responseURL,responseType:this.responseType});break;default:var xResult;switch(jConfig.method){case"HEAD":switch(jConfig.dataType){case"JSON":for(var aAllResHeader=this.getAllResponseHeaders().split("\r\n"),jAllResHeader={},i=0,l=aAllResHeader.length;l>i;i++){var sResHeader=aAllResHeader[i],nIndex=sResHeader.indexOf(": ");nIndex>-1&&(jAllResHeader[sResHeader.substr(0,nIndex)]=sResHeader.substr(nIndex+2))}xResult=jAllResHeader;break;case"FUNCTION":var _this=this;xResult=function(e){return _this.getResponseHeader(e)};break;default:xResult=this.getAllResponseHeaders()}break;default:switch(jConfig.dataType){case"JSON":try{xResult=JSON?JSON.parse(this.responseText):eval("("+this.responseText+")")}catch(e){xResult={error:!0,errorText:"Error Format",source:this.responseText}}break;case"XML":xResult=this.responseXML;break;default:xResult=this.responseText}}jConfig.success.call(jConfig,xResult,this)}}},xhr.send(sSendData)}if(jConfig=$.fn.extend({method:"GET",dataType:"TEXT",charset:"utf-8",cache:!0,async:!0,retryCount:3,success:function(){console.log("Not callback success(), but AJAX request is successfully!")},error:function(){console.log("Request is Failed.")}},this.globalAjax,jConfig),jConfig.retry=function(){return jConfig.retryCount<=0?!1:(jConfig.retryCount--,void __fRun())},!jConfig.url||"string"!=typeof jConfig.url)return null;var xhr=__fInitXHR();jConfig.method=jConfig.method.toUpperCase(),jConfig.dataType=jConfig.dataType.toUpperCase();var sSendData=null;if("object"==typeof jConfig.data)if("POST"===jConfig.method&&"JSON"===jConfig.dataType)sSendData=JSON?JSON.stringify(jConfig.data):__fJsonStringify(jConfig.data);else{var aPara=[];for(var v in jConfig.data)jConfig.data.hasOwnProperty(v)&&(jConfig.data[v]instanceof Array?aPara.push(v+"="+jConfig.data[v].join("&"+v+"=")):aPara.push(v+"="+jConfig.data[v]));sSendData=aPara.join("&")}else"string"==typeof jConfig.data&&(sSendData=jConfig.data);var aQuery=[];return"GET"===jConfig.method&&sSendData&&aQuery.push(sSendData),jConfig.cache&&"HEAD"!==jConfig.method||aQuery.push("_="+Math.random()),aQuery.length&&(jConfig.url+=(~jConfig.url.indexOf("?")?"&":"?")+aQuery.join("&")),__fRun(),xhr},ajaxSet:function(e){this.globalAjax=e}}))}(jClass);